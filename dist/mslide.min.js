/*! mslide.js 0.0.2a https://github.com/godxiaoji */ !function(a){var b=a.navigator,c=b.userAgent.toLowerCase(),d=/android/i.test(c),e="touchstart",f="touchmove",g="touchend",h={prefix:function(){for(var a,b="t,webkitT,MozT,msT,OT".split(","),c=document.createElement("div").style,d=0;d<b.length;d++)if(a=b[d]+"ransform",a in c)return c=null,b[d].substr(0,b[d].length-1);return c=null,""}(),addPrefix:function(a,b){return""===this.prefix?a:b?this.prefix+a.charAt(0).toUpperCase()+a.substr(1):"-"+this.prefix.toLowerCase()+"-"+a}},i=h.addPrefix("transform"),j=h.addPrefix("transition"),k=h.addPrefix("transform",!0),l=h.addPrefix("transitionDuration",!0),m=function(a){this.options=a||{},this.target="string"==typeof this.options.selector?document.querySelector(this.options.selector):this.options.selector,this.list=this.options.listSelector?this.target.querySelector(this.options.listSelector):this.target.children[1],this.target.style.overflowX="hidden",this.target.addEventListener(e,this,!1),this.setItems();var b,c="index,onSlide,autoPlay,interval";for(b in this.options)-1!==c.indexOf(b)&&(this[b]=this.options[b]);this.options.prevSelector&&(this.prev="string"==typeof this.options.prevSelector?document.querySelector(this.options.prevSelector):this.options.prevSelector,this.prev.addEventListener("click",this,!1)),this.options.nextSelector&&(this.next="string"==typeof this.options.nextSelector?document.querySelector(this.options.nextSelector):this.options.nextSelector,this.next.addEventListener("click",this,!1)),this.to(this.index),this.running=!1,this.autoPlay&&this.start()};m.prototype={autoPlay:!1,interval:4e3,duration:100,index:0,itemWidth:0,getLastIndex:function(){return this.items.length-1},getCircleIndex:function(a){var b=this.items.length;return(this.index+b+a%b)%b},setItems:function(){var a=this.target.offsetWidth;this.itemWidth=a,this.items=[].slice.call(this.list.children,0),this.list.style.cssText=["width:"+a*this.items.length+"px",i+":translate3d("+-a*this.index+"px,0px,0px)",j+":"+i+" 0ms"].join(";"),this.items.forEach(function(b){b.style.width=a+"px"})},handleEvent:function(a){switch(a.type){case e:this.onTouchStart(a);break;case f:this.onTouchMove(a);break;case g:this.onTouchEnd(a);break;case"click":a.target==this.prev?this.onPrevClick():a.target==this.next&&this.onNextClick()}},onSlide:function(){},onTouchStart:function(a){var b=this;b.clear(),d&&(b.touchMoveTimeout=setTimeout(function(){b.resetStatus()},3e3)),b.target.removeEventListener(f,b,!1),b.target.removeEventListener(g,b,!1),b.target.addEventListener(f,b,!1),b.target.addEventListener(g,b,!1),delete b.horizontal,b.touchCoords={},b.touchCoords.startX=a.touches[0].pageX,b.touchCoords.startY=a.touches[0].pageY,b.touchCoords.timeStamp=a.timeStamp},onTouchMove:function(a){var b=this;if(b.touchCoords){b.touchCoords.stopX=a.touches[0].pageX,b.touchCoords.stopY=a.touches[0].pageY;var c=b.touchCoords.startX-b.touchCoords.stopX,d=Math.abs(c),e=Math.abs(b.touchCoords.startY-b.touchCoords.stopY);if("undefined"!=typeof b.horizontal)0!==c&&a.preventDefault();else{if(!(d>e))return delete b.touchCoords,void(b.horizontal=!1);b.horizontal=!0,0!==c&&a.preventDefault(),clearTimeout(b.touchMoveTimeout)}var f=b.itemWidth,g=b.index,h=g*f,i=b.getLastIndex();h+=0===g&&0>c||g==i&&c>0?Math.ceil(c/Math.log(Math.abs(c))):c,f>d&&(b.list.style[k]="translate3d("+-h+"px, 0px, 0px)")}},onTouchEnd:function(a){var b=this;if(clearTimeout(b.touchMoveTimeout),b.target.removeEventListener(f,b,!1),b.target.removeEventListener(g,b,!1),b.touchCoords){var c,d=b.itemWidth,e=Math.abs(b.touchCoords.startX-b.touchCoords.stopX),h=b.index;isNaN(e)||0===e||(e>d&&(e=d),c=e>=80||a.timeStamp-b.touchCoords.timeStamp<200?b.touchCoords.startX>b.touchCoords.stopX?h+1:h-1:h,b.to(c),delete b.touchCoords)}this.resetStatus()},onPrevClick:function(){this.clear(),this.prev(),this.autoPlay&&this.run()},onNextClick:function(){this.clear(),this.next(),this.autoPlay&&this.run()},prev:function(){this.to(this.index-1)},next:function(){this.to(this.index+1)},start:function(){this.running||(this.running=!0,this.clear(),this.run())},stop:function(){this.running=!1,this.clear()},clear:function(){clearTimeout(this.slideTimer),this.slideTimer=null},run:function(){var a=this;a.slideTimer||(a.slideTimer=setInterval(function(){a.to(a.getCircleIndex(1))},a.interval))},resetStatus:function(){this.autoPlay&&this.run()},to:function(a){var b=this.index;a>=0&&a<=this.getLastIndex()&&a!=b?this.slide(a):this.slide(b)},slide:function(a){var b=this;b.index=a,b.list.style[l]=b.duration+"ms",b.list.style[k]="translate3d("+-b.itemWidth*a+"px, 0px, 0px)",setTimeout(function(){b.list.style[l]="0ms",b.onSlide(b.index)},b.duration)},refresh:function(){this.setItems();var a=this.getLastIndex();this.index>a&&this.to(a)},destroy:function(){this.destroyed=!0,this.stop(),this.target.removeEventListener(e,this,!1),this.target.removeEventListener(f,this,!1),this.target.removeEventListener(g,this,!1),this.prev&&this.prev.removeEventListener("click",this,!1),this.next&&this.next.removeEventListener("click",this,!1),this.target=this.list=this.items=this.prev=this.next=null}},a.MSlide=m}(window);